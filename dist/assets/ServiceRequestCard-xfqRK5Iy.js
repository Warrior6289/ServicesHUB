import{j as e,m as t}from"./ui-D5g_oJ6l.js";import{r as i}from"./vendor-BQpy66Z4.js";import{c as r}from"./index-vhHMrfFc.js";import{L as s}from"./router-BYxgfnPJ.js";const a=({className:t})=>e.jsx("div",{className:`animate-pulse rounded-md bg-slate-200 dark:bg-slate-700 ${t??""}`}),o=({lines:t=3,className:i})=>e.jsx("div",{className:i,children:Array.from({length:t}).map((i,r)=>e.jsx("div",{className:"mt-2 first:mt-0",children:e.jsx(a,{className:"h-3 "+(r===t-1?"w-2/3":"w-full")})},r))});async function n(){const{data:e}=await r.get("/user/purchases");return e}async function c(e,t,i){const{data:s}=await r.post(`/services/${e}/reviews`,{rating:t,review:i});return s}async function l(){const{data:e}=await r.get("/seller/listings");return e}async function d(e){const{data:t}=await r.post("/seller/listings",e);return t}async function p(e,t){const{data:i}=await r.patch(`/seller/listings/${e}`,t);return i}async function g(e){const{data:t}=await r.delete(`/seller/listings/${e}`);return t}async function m(e){try{const{data:t}=await r.get(`/categories/${e}/sellers`);return Array.isArray(t)?t:h(e)}catch(t){return h(e)}}function h(e){const t={plumber:[{id:"p1",name:"Mike Johnson",rating:4.8,reviewsCount:127,serviceDescription:"Professional plumbing services with 15+ years experience. Specializing in emergency repairs, installations, and maintenance.",portfolioImages:["https://picsum.photos/id/1011/400/300","https://picsum.photos/id/1012/400/300"],pricing:"$75-150/hour",availability:"Available today",verified:!0,category:"plumber",location:"Downtown",responseTime:"< 2 hours",completedJobs:450,serviceCategories:["Plumber"]},{id:"p2",name:"Sarah Chen",rating:4.6,reviewsCount:89,serviceDescription:"Licensed plumber offering residential and commercial services. Eco-friendly solutions available.",portfolioImages:["https://picsum.photos/id/1013/400/300"],pricing:"$65-120/hour",availability:"Available tomorrow",verified:!0,category:"plumber",location:"Westside",responseTime:"< 4 hours",completedJobs:320,serviceCategories:["Plumber"]}],electrician:[{id:"e1",name:"David Rodriguez",rating:4.9,reviewsCount:203,serviceDescription:"Master electrician with expertise in residential wiring, panel upgrades, and smart home installations.",portfolioImages:["https://picsum.photos/id/1021/400/300","https://picsum.photos/id/1022/400/300"],pricing:"$85-180/hour",availability:"Available today",verified:!0,category:"electrician",location:"Northside",responseTime:"< 1 hour",completedJobs:680,serviceCategories:["Electrician"]}],welder:[{id:"w1",name:"Tom Wilson",rating:4.7,reviewsCount:156,serviceDescription:"Certified welder specializing in automotive, structural, and artistic metalwork. Mobile service available.",portfolioImages:["https://picsum.photos/id/1031/400/300"],pricing:"$90-200/hour",availability:"Available tomorrow",verified:!0,category:"welder",location:"Industrial District",responseTime:"< 6 hours",completedJobs:280,serviceCategories:["Welder"]}],carpenter:[{id:"c1",name:"Lisa Anderson",rating:4.5,reviewsCount:94,serviceDescription:"Skilled carpenter offering custom furniture, repairs, and home improvement projects.",portfolioImages:["https://picsum.photos/id/1041/400/300","https://picsum.photos/id/1042/400/300"],pricing:"$70-140/hour",availability:"Available today",verified:!0,category:"carpenter",location:"Eastside",responseTime:"< 3 hours",completedJobs:190,serviceCategories:["Carpenter"]}],technician:[{id:"t1",name:"Alex Kim",rating:4.6,reviewsCount:78,serviceDescription:"Certified technician specializing in appliance repair and diagnostics.",portfolioImages:["https://picsum.photos/id/1051/400/300"],pricing:"$60-130/hour",availability:"Available today",verified:!0,category:"technician",location:"Central",responseTime:"< 2 hours",completedJobs:240,serviceCategories:["Technician","Appliance Repair"]}],painter:[{id:"pt1",name:"Maria Garcia",rating:4.7,reviewsCount:112,serviceDescription:"Professional painter with expertise in interior and exterior painting.",portfolioImages:["https://picsum.photos/id/1061/400/300","https://picsum.photos/id/1062/400/300"],pricing:"$50-120/hour",availability:"Available tomorrow",verified:!0,category:"painter",location:"Southside",responseTime:"< 4 hours",completedJobs:180,serviceCategories:["Painter"]}],hvac:[{id:"h1",name:"Robert Taylor",rating:4.8,reviewsCount:145,serviceDescription:"HVAC specialist providing heating, ventilation, and air conditioning services.",portfolioImages:["https://picsum.photos/id/1071/400/300"],pricing:"$80-160/hour",availability:"Available today",verified:!0,category:"hvac",location:"Northside",responseTime:"< 2 hours",completedJobs:320,serviceCategories:["HVAC"]}],cleaning:[{id:"cl1",name:"Jennifer White",rating:4.4,reviewsCount:89,serviceDescription:"Professional cleaning services for homes and offices.",portfolioImages:["https://picsum.photos/id/1081/400/300"],pricing:"$25-50/hour",availability:"Available today",verified:!0,category:"cleaning",location:"Downtown",responseTime:"< 1 hour",completedJobs:150,serviceCategories:["Cleaning"]}]}[e.toLowerCase()];return t||[{id:`generic-${e}-1`,name:`Professional ${e.charAt(0).toUpperCase()+e.slice(1)}`,rating:4.5,reviewsCount:85,serviceDescription:`Experienced ${e} professional providing quality services with attention to detail.`,portfolioImages:["https://picsum.photos/id/2001/400/300"],pricing:"$60-120/hour",availability:"Available today",verified:!0,category:e,location:"Local Area",responseTime:"< 3 hours",completedJobs:150,serviceCategories:[e.charAt(0).toUpperCase()+e.slice(1)]},{id:`generic-${e}-2`,name:`Expert ${e.charAt(0).toUpperCase()+e.slice(1)} Services`,rating:4.3,reviewsCount:67,serviceDescription:`Reliable ${e} services with competitive pricing and excellent customer satisfaction.`,portfolioImages:["https://picsum.photos/id/2002/400/300"],pricing:"$50-110/hour",availability:"Available tomorrow",verified:!0,category:e,location:"Nearby",responseTime:"< 4 hours",completedJobs:120,serviceCategories:[e.charAt(0).toUpperCase()+e.slice(1)]}]}const u={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",price_boosted:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",converted_to_scheduled:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-300",accepted:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",in_progress:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",expired:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"},x={pending:"Pending",price_boosted:"Price Boosted",converted_to_scheduled:"Converted to Scheduled",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",cancelled:"Cancelled",expired:"Expired"},v=({request:r,onBoostPrice:a,onCancel:o,onAccept:n,viewType:c="buyer",sellerLocation:l,accepting:d=!1})=>{const[p,g]=i.useState(""),[m,h]=i.useState("");i.useEffect(()=>{if("seller"===c&&l){const e=((e,t,i,r)=>{const s=(i-e)*Math.PI/180,a=(r-t)*Math.PI/180,o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))})(l.lat,l.lng,r.buyerLocation.lat,r.buyerLocation.lng);h(e<1?`${Math.round(1e3*e)}m`:`${e.toFixed(1)}km`)}},[c,l,r.buyerLocation]),i.useEffect(()=>{if("instant"===r.type&&r.expiresAt){const e=()=>{const e=(new Date).getTime(),t=new Date(r.expiresAt).getTime()-e;if(t<=0)g("Expired");else{const e=Math.floor(t/6e4),i=Math.floor(t%6e4/1e3);g(`${e}m ${i}s`)}};e();const t=setInterval(e,1e3);return()=>clearInterval(t)}},[r.type,r.expiresAt]);const v="buyer"===c&&"instant"===r.type&&["pending","price_boosted"].includes(r.status),b="buyer"===c&&["pending","price_boosted"].includes(r.status),y="seller"===c&&["pending","price_boosted"].includes(r.status),f=r.currentPrice>r.initialPrice;return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-800 p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.categoryName}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${u[r.status]}`,children:x[r.status]}),"instant"===r.type&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",children:"Instant"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.description.length>100?`${r.description.slice(0,100)}...`:r.description})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Price:"}),e.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:["$",r.currentPrice.toFixed(2),f&&e.jsxs("span",{className:"ml-1 text-xs text-orange-600 dark:text-orange-400",children:["(Boosted from $",r.initialPrice.toFixed(2),")"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"seller"===c?"Distance:":"Location:"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:"seller"===c&&m?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),m]}):r.buyerLocation.address.split(",")[0]})]}),"seller"===c&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Customer:"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r.buyerName})]}),"instant"===r.type&&r.expiresAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Expires in:"}),e.jsx("div",{className:"font-semibold "+("Expired"===p?"text-red-600":"text-gray-900 dark:text-white"),children:p})]}),"scheduled"===r.type&&r.scheduledDate&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Scheduled:"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:new Date(r.scheduledDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Time:"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r.scheduledTimeSlot})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(s,{to:`/requests/${r.id}`,className:"flex-1 text-center px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:"View Details"}),y&&n&&e.jsx("button",{onClick:()=>n(r.id),disabled:d,className:"flex-1 px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700 disabled:opacity-50 transition-colors",children:d?"Accepting...":"Accept Request"}),v&&a&&e.jsx("button",{onClick:()=>a(r.id),className:"flex-1 px-4 py-2 rounded-lg bg-orange-600 text-white text-sm font-medium hover:bg-orange-700 transition-colors",children:"Boost Price"}),b&&o&&e.jsx("button",{onClick:()=>o(r.id),className:"flex-1 sm:flex-none px-4 py-2 rounded-lg border border-red-300 dark:border-red-600 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Cancel"})]})]})};export{a as S,o as a,v as b,m as c,l as d,d as e,n as f,g as r,c as s,p as u};
//# sourceMappingURL=ServiceRequestCard-xfqRK5Iy.js.map
